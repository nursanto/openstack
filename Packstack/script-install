echo -e "LANG=en_US.utf-8 \nLC_ALL=en_US.utf-8" > /etc/environment
yum -y update
systemctl disable firewalld
systemctl stop firewalld
systemctl disable NetworkManager
systemctl stop NetworkManager
systemctl enable network
systemctl start network
sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config
yum install -y centos-release-openstack-ocata
yum update -y
yum install -y openstack-packstack
packstack --gen-answer-file=answerfile.txt

#edit hostname add  ip hostname
#ex :
# 192.168.0.2 nama-hostname nama-hostname.lab
#reboot

sed -i 's/CONFIG_CINDER_VOLUMES_SIZE=20G/CONFIG_CINDER_VOLUMES_SIZE=500G/g' answerfile.txt    # ganti 500G dengan alokasi disk untuk cinder volume sesuai kebutuhan
sed -i 's/CONFIG_HEAT_INSTALL=n/CONFIG_HEAT_INSTALL=y/g' answerfile.txt       # enable heat
sed -i 's/CONFIG_LBAAS_INSTALL=n/CONFIG_LBAAS_INSTALL=y/g' answerfile.txt     # enable lbaas
sed -i 's/CONFIG_NEUTRON_FWAAS=n/CONFIG_NEUTRON_FWAAS=y/g' answerfile.txt     # enable fwaas
sed -i 's/CONFIG_NEUTRON_VPNAAS=n/CONFIG_NEUTRON_VPNAAS=y/g' answerfile.txt   # enable vpnaas
sed -i 's/CONFIG_NEUTRON_OVS_BRIDGE_IFACES=/CONFIG_NEUTRON_OVS_BRIDGE_IFACES=br-ex:ens160/g' answerfile.txt # ganti ens160 dg interface yg dipakai. ex eth0/eno1/etc
sed -i 's/CONFIG_HEAT_CLOUDWATCH_INSTALL=n/CONFIG_HEAT_CLOUDWATCH_INSTALL=y/g' answerfile.txt   # enable cloudwatch

packstack --answer-file=answerfile.txt | tee progres
